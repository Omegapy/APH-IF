
# APH-IF Development Environment Configuration
# Shared configuration for all services (backend, data_processing, frontend)
# DO NOT COMMIT THIS FILE - Contains sensitive API keys

# ============================================================================
# ENVIRONMENT CONFIGURATION
# ============================================================================
# Controls which Neo4j instance is used automatically:
# - development: Uses NEO4J_URI_DEV (safe for development work)
#
# TESTING MODE: Set FORCE_TEST_DB=true to explicitly use test database
# This overrides APP_ENV and should only be used for specific testing scenarios
# where you need to test data injections or graph modifications safely.
# ============================================================================
APP_ENV='development'
FORCE_TEST_DB='false'

# Debug and Logging
VERBOSE='true'

# Service URLs (for inter-service communication)
BACKEND_URL=http://localhost:8000
DATA_PROCESSING_URL=http://localhost:8010
FRONTEND_URL=http://localhost:8501

# ============================================================================
# API CONFIGURATIONS
# ============================================================================

# OpenAI API Configuration
OPENAI_API_KEY=sk-proj-
OPENAI_MODEL=gpt-5
OPENAI_MODEL_MINI=gpt-5-mini
OPENAI_MODEL_NANO=gpt-5-nano

# OpenAI API Rate Limiting Configuration - Tier 3 GPT-5-mini Limits (2025)
# Your account is Tier 3 ($100+ paid, 7+ days) with $1,000/month limit
# Official Tier 3 limits for GPT-5 nano model:
# - RPM: 5,000 requests per minute
# - TPM: 4,000,000 tokens per minute (GPT-5-mini  specific!)
# - Batch queue: 40,000,000 tokens
# Using 90% of actual limits for optimal performance
OPENAI_REQUESTS_PER_MINUTE=4500
OPENAI_TOKENS_PER_MINUTE=3600000
OPENAI_MAX_TOKENS=6000

# LLM Client Optimization Settings
LLM_TIMEOUT_SECONDS=240
LLM_STREAMING_ENABLED=true
FUSION_PARALLEL_PREPROCESSING=true

# Data Processing Configuration
# PDF source directory for processing
# Development: processing/data_pdf (production CFR documents)
# Test mode: processing/data_pdf_test (smaller test documents)
PDF_DIR=processing/data_pdf

# Data Processing Rate Limiting - Tier 3 Optimized for Speed
# Optimized settings to reduce 25+ hour processing time to 10-30 minutes
# Higher values = fewer API calls but less detailed extraction
# Lower values = more API calls but more detailed extraction
# Balanced for speed while maintaining quality
EXTRACT_EVERY_N_CHUNKS=5

# Processing Optimization Settings
# These settings dramatically improve processing speed
CHUNK_SIZE_CHARS=3000              # Larger chunks = fewer API calls
MAX_DOCS=0                         # 0 = no limit, process all documents
MAX_PAGES=0                        # 0 = no limit, process all pages

# API Monitoring Configuration
# Controls the level of detail in API monitoring logs
# Options: minimal, standard, detailed, debug
MONITORING_ENABLED=true
MONITORING_LOG_LEVEL=standard
MONITORING_DIR=monitoring_logs

# Google Gemini API Configuration
GEMINI_API_KEY=
GEMINI_MODEL=gemini-2.5-pro

# ============================================================================
# NEO4J DATABASE CONFIGURATION
# ============================================================================
# The system automatically selects the appropriate Neo4j instance based on APP_ENV:
#
# DEVELOPMENT MODE (APP_ENV=development):
#   → Uses NEO4J_URI_DEV credentials
#   → Safe for development work, experimentation, and testing features
#   → No risk to production data
#
# ============================================================================


#----- Local Database --------------------------------------------------------
# Development Instance (Safe for Development Work) 
NEO4J_URI_DEV='neo4j://127.0.0.1:7687'
NEO4J_USERNAME_DEV='-----'
NEO4J_PASSWORD_DEV='-----'
NEO4J_DATABASE_DEV='-----'

# TEST Instance (Safe for TEST Work) 
NEO4J_URI_TEST='neo4j://127.0.0.1:7687'
NEO4J_USERNAME_TEST='----'
NEO4J_PASSWORD_TEST='-----'
NEO4J_DATABASE_TEST='-----'


# Global Neo4j Instance initialized with Development Instance credential 
NEO4J_URI='neo4j://127.0.0.1:7687'
NEO4J_USERNAME='----'
NEO4J_PASSWORD='------'
NEO4J_DATABASE='----'

# ============================================================================
# LLM STRUCTURAL CYPHER CONFIGURATION
# ============================================================================
# Controls the advanced LLM-powered natural language to Cypher generation system
# This is the PRIMARY traversal method with LangChain as deprecated fallback
# ============================================================================

# Enable/disable LLM Structural Cypher (primary traversal path)
USE_LLM_STRUCTURAL_CYPHER='true'

# Safety constraints for generated queries
LLM_CYPHER_MAX_HOPS=3
LLM_CYPHER_FORCE_LIMIT=50
LLM_CYPHER_ALLOW_CALL='false'

# Generation optimization
LLM_CYPHER_EXAMPLES_ENABLED='true'
LLM_CYPHER_PROMPT_TOKEN_BUDGET=3500

# LLM Structural Internal Fallback Configuration
LLM_STRUCTURAL_ALLOW_LANGCHAIN_FALLBACK='false'

# DEPRECATED Schema-Aware Fallback (disabled by default, will be removed)
# Only enable for emergency compatibility - LangChain fallback is preferred
LLM_STRUCTURAL_ENABLE_SCHEMA_AWARE_FALLBACK='false'

# Narrative generation settings
LLM_STRUCTURAL_NARRATIVE_ENABLED='true'
LLM_STRUCTURAL_NARRATIVE_TOKEN_BUDGET=3500
LLM_STRUCTURAL_SOURCE_MAX=15
LLM_STRUCTURAL_PRESERVE_NUMBERS='true'
LLM_STRUCTURAL_CITATION_VALIDATION='true'

# Domain-aware citations
LLM_DOMAIN_CITATION_ENABLED='true'

# ============================================================================
# DEPRECATED: LangChain fallback will emit warnings when used
# Future versions will remove LangChain support entirely
# ============================================================================
