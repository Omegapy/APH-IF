# APH-IF Development Environment Configuration
# Shared configuration for all services (backend, data_processing, frontend)
# DO NOT COMMIT THIS FILE - Contains sensitive API keys

# ============================================================================
# ENVIRONMENT CONFIGURATION
# ============================================================================
# Controls which Neo4j instance is used automatically:
# - development: Uses NEO4J_URI_DEV (safe for development work)
# - production:  Uses NEO4J_URI_PROD (live data - use with extreme caution)
#
# TESTING MODE: Set FORCE_TEST_DB=true to explicitly use test database
# This overrides APP_ENV and should only be used for specific testing scenarios
# where you need to test data injections or graph modifications safely.
# ============================================================================

APP_ENV=development
FORCE_TEST_DB=false

# Service URLs (for inter-service communication)
BACKEND_URL=http://localhost:8000
DATA_PROCESSING_URL=http://localhost:8010
FRONTEND_URL=http://localhost:8501

# ============================================================================
# API CONFIGURATIONS
# ============================================================================

# OpenAI API Configuration
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-5-nano
OPENAI_MODEL_MINI=gpt-5-mini
OPENAI_MODEL_NANO=gpt-5-nano

# OpenAI API Rate Limiting Configuration
# These settings help prevent API rate limit errors and freezing issues
# Official OpenAI rate limits by tier (as of 2025):
#
# Tier    | RPM     | TPM         | Batch Queue Limit
# --------|---------|-------------|------------------
# Free    | Not supported
# Tier 1  | 500     | 30,000      | 90,000
# Tier 2  | 5,000   | 450,000     | 1,350,000
# Tier 3  | 5,000   | 800,000     | 100,000,000
# Tier 4  | 10,000  | 2,000,000   | 200,000,000
# Tier 5  | 15,000  | 40,000,000  | 15,000,000,000
#
# Example settings (using 90% of limits for optimal performance):
# Tier 1: OPENAI_REQUESTS_PER_MINUTE=450, OPENAI_TOKENS_PER_MINUTE=27000
# Tier 2: OPENAI_REQUESTS_PER_MINUTE=4500, OPENAI_TOKENS_PER_MINUTE=405000
# Tier 3: OPENAI_REQUESTS_PER_MINUTE=4500, OPENAI_TOKENS_PER_MINUTE=720000
# Tier 4: OPENAI_REQUESTS_PER_MINUTE=9000, OPENAI_TOKENS_PER_MINUTE=1800000
# Tier 5: OPENAI_REQUESTS_PER_MINUTE=13500, OPENAI_TOKENS_PER_MINUTE=36000000
OPENAI_REQUESTS_PER_MINUTE=4500
OPENAI_TOKENS_PER_MINUTE=720000

# Data Processing Configuration
# PDF source directory for processing
# Development: processing/data_pdf (production CFR documents)
# Test mode: processing/data_pdf_test (smaller test documents)
PDF_DIR=processing/data_pdf

# Data Processing Rate Limiting
# Controls how frequently the system makes API calls during processing
# Higher values = fewer API calls but less detailed extraction
# Lower values = more API calls but more detailed extraction
# Tier 3+ can use more aggressive settings (lower values)
EXTRACT_EVERY_N_CHUNKS=2

# API Monitoring Configuration
# Controls the level of detail in API monitoring logs
# Options: minimal, standard, detailed, debug
MONITORING_ENABLED=true
MONITORING_LOG_LEVEL=standard
MONITORING_DIR=monitoring_logs

# Google Gemini API Configuration
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-2.5-pro

# ============================================================================
# NEO4J DATABASE CONFIGURATION
# ============================================================================
# The system automatically selects the appropriate Neo4j instance based on APP_ENV:
#
# DEVELOPMENT MODE (APP_ENV=development):
#   → Uses NEO4J_URI_DEV credentials
#   → Safe for development work, experimentation, and testing features
#   → No risk to production data
#
# PRODUCTION MODE (APP_ENV=production):
#   → Uses NEO4J_URI_PROD credentials
#   → Contains live/production data
#   → Use with extreme caution - changes affect real users
#
# TESTING MODE (FORCE_TEST_DB=true):
#   → Uses NEO4J_URI_TEST credentials
#   → Only for explicit testing scenarios (data injection, graph modification tests)
#   → Must be explicitly enabled, overrides APP_ENV setting
#   → Should only be used in targeted test cases
# ============================================================================

# Production Instance (Live Data - Use with Extreme Caution)
NEO4J_URI_PROD=neo4j+s://your-production-instance.databases.neo4j.io
NEO4J_USERNAME_PROD=neo4j
NEO4J_PASSWORD_PROD=your-production-password

# Development Instance (Safe for Development Work)
NEO4J_URI_DEV=neo4j+s://your-development-instance.databases.neo4j.io
NEO4J_USERNAME_DEV=neo4j
NEO4J_PASSWORD_DEV=your-development-password

# Testing Instance (Only for Explicit Testing Scenarios)
NEO4J_URI_TEST=neo4j+s://your-testing-instance.databases.neo4j.io
NEO4J_USERNAME_TEST=neo4j
NEO4J_PASSWORD_TEST=your-testing-password
